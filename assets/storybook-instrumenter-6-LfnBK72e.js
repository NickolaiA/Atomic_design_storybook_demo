const{once:Tn}=__STORYBOOK_MODULE_CLIENT_LOGGER__,{FORCE_REMOUNT:Qe,STORY_RENDER_PHASE_CHANGED:Nn,SET_CURRENT_STORY:An}=__STORYBOOK_MODULE_CORE_EVENTS__,{addons:Mn}=__STORYBOOK_MODULE_PREVIEW_API__,{global:P}=__STORYBOOK_MODULE_GLOBAL__;var In=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Rn={reset:[0,0],bold:[1,22,"\x1B[22m\x1B[1m"],dim:[2,22,"\x1B[22m\x1B[2m"],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},Ln=Object.entries(Rn);function ze(e){return String(e)}ze.open="";ze.close="";function Pn(e=!1){let t=typeof process<"u"?process:void 0,n=t?.env||{},r=t?.argv||[];return!("NO_COLOR"in n||r.includes("--no-color"))&&("FORCE_COLOR"in n||r.includes("--color")||t?.platform==="win32"||e&&n.TERM!=="dumb"||"CI"in n)||typeof window<"u"&&!!window.chrome}function Dn(e=!1){let t=Pn(e),n=(o,u,s,a)=>{let c="",f=0;do c+=o.substring(f,a)+s,f=a+u.length,a=o.indexOf(u,f);while(~a);return c+o.substring(f)},r=(o,u,s=o)=>{let a=c=>{let f=String(c),b=f.indexOf(u,o.length);return~b?o+n(f,u,s,b)+u:o+f+u};return a.open=o,a.close=u,a},i={isColorSupported:t},l=o=>`\x1B[${o}m`;for(let[o,u]of Ln)i[o]=t?r(l(u[0]),l(u[1]),u[2]):ze;return i}var Q=Dn(!1);function jn(e,t){let n=Object.keys(e),r=t===null?n:n.sort(t);if(Object.getOwnPropertySymbols)for(let i of Object.getOwnPropertySymbols(e))Object.getOwnPropertyDescriptor(e,i).enumerable&&r.push(i);return r}function Oe(e,t,n,r,i,l,o=": "){let u="",s=0,a=e.next();if(!a.done){u+=t.spacingOuter;let c=n+t.indent;for(;!a.done;){if(u+=c,s++===t.maxWidth){u+="…";break}let f=l(a.value[0],t,c,r,i),b=l(a.value[1],t,c,r,i);u+=f+o+b,a=e.next(),a.done?t.min||(u+=","):u+=`,${t.spacingInner}`}u+=t.spacingOuter+n}return u}function Ue(e,t,n,r,i,l){let o="",u=0,s=e.next();if(!s.done){o+=t.spacingOuter;let a=n+t.indent;for(;!s.done;){if(o+=a,u++===t.maxWidth){o+="…";break}o+=l(s.value,t,a,r,i),s=e.next(),s.done?t.min||(o+=","):o+=`,${t.spacingInner}`}o+=t.spacingOuter+n}return o}function Se(e,t,n,r,i,l){let o="";e=e instanceof ArrayBuffer?new DataView(e):e;let u=a=>a instanceof DataView,s=u(e)?e.byteLength:e.length;if(s>0){o+=t.spacingOuter;let a=n+t.indent;for(let c=0;c<s;c++){if(o+=a,c===t.maxWidth){o+="…";break}(u(e)||c in e)&&(o+=l(u(e)?e.getInt8(c):e[c],t,a,r,i)),c<s-1?o+=`,${t.spacingInner}`:t.min||(o+=",")}o+=t.spacingOuter+n}return o}function Ke(e,t,n,r,i,l){let o="",u=jn(e,t.compareKeys);if(u.length>0){o+=t.spacingOuter;let s=n+t.indent;for(let a=0;a<u.length;a++){let c=u[a],f=l(c,t,s,r,i),b=l(e[c],t,s,r,i);o+=`${s+f}: ${b}`,a<u.length-1?o+=`,${t.spacingInner}`:t.min||(o+=",")}o+=t.spacingOuter+n}return o}var Fn=typeof Symbol=="function"&&Symbol.for?Symbol.for("jest.asymmetricMatcher"):1267621,we=" ",Bn=(e,t,n,r,i,l)=>{let o=e.toString();if(o==="ArrayContaining"||o==="ArrayNotContaining")return++r>t.maxDepth?`[${o}]`:`${o+we}[${Se(e.sample,t,n,r,i,l)}]`;if(o==="ObjectContaining"||o==="ObjectNotContaining")return++r>t.maxDepth?`[${o}]`:`${o+we}{${Ke(e.sample,t,n,r,i,l)}}`;if(o==="StringMatching"||o==="StringNotMatching"||o==="StringContaining"||o==="StringNotContaining")return o+we+l(e.sample,t,n,r,i);if(typeof e.toAsymmetricMatcher!="function")throw new TypeError(`Asymmetric matcher ${e.constructor.name} does not implement toAsymmetricMatcher()`);return e.toAsymmetricMatcher()},xn=e=>e&&e.$$typeof===Fn,kn={serialize:Bn,test:xn},zn=" ",Kt=new Set(["DOMStringMap","NamedNodeMap"]),Un=/^(?:HTML\w*Collection|NodeList)$/;function Kn(e){return Kt.has(e)||Un.test(e)}var Wn=e=>e&&e.constructor&&!!e.constructor.name&&Kn(e.constructor.name);function Yn(e){return e.constructor.name==="NamedNodeMap"}var qn=(e,t,n,r,i,l)=>{let o=e.constructor.name;return++r>t.maxDepth?`[${o}]`:(t.min?"":o+zn)+(Kt.has(o)?`{${Ke(Yn(e)?[...e].reduce((u,s)=>(u[s.name]=s.value,u),{}):{...e},t,n,r,i,l)}}`:`[${Se([...e],t,n,r,i,l)}]`)},Vn={serialize:qn,test:Wn};function Wt(e){return e.replaceAll("<","&lt;").replaceAll(">","&gt;")}function We(e,t,n,r,i,l,o){let u=r+n.indent,s=n.colors;return e.map(a=>{let c=t[a],f=o(c,n,u,i,l);return typeof c!="string"&&(f.includes(`
`)&&(f=n.spacingOuter+u+f+n.spacingOuter+r),f=`{${f}}`),`${n.spacingInner+r+s.prop.open+a+s.prop.close}=${s.value.open}${f}${s.value.close}`}).join("")}function Ye(e,t,n,r,i,l){return e.map(o=>t.spacingOuter+n+(typeof o=="string"?Yt(o,t):l(o,t,n,r,i))).join("")}function Yt(e,t){let n=t.colors.content;return n.open+Wt(e)+n.close}function Gn(e,t){let n=t.colors.comment;return`${n.open}<!--${Wt(e)}-->${n.close}`}function qe(e,t,n,r,i){let l=r.colors.tag;return`${l.open}<${e}${t&&l.close+t+r.spacingOuter+i+l.open}${n?`>${l.close}${n}${r.spacingOuter}${i}${l.open}</${e}`:`${t&&!r.min?"":" "}/`}>${l.close}`}function Ve(e,t){let n=t.colors.tag;return`${n.open}<${e}${n.close} …${n.open} />${n.close}`}var Hn=1,qt=3,Vt=8,Gt=11,Jn=/^(?:(?:HTML|SVG)\w*)?Element$/;function Xn(e){try{return typeof e.hasAttribute=="function"&&e.hasAttribute("is")}catch{return!1}}function Zn(e){let t=e.constructor.name,{nodeType:n,tagName:r}=e,i=typeof r=="string"&&r.includes("-")||Xn(e);return n===Hn&&(Jn.test(t)||i)||n===qt&&t==="Text"||n===Vt&&t==="Comment"||n===Gt&&t==="DocumentFragment"}var Qn=e=>{var t;return((t=e?.constructor)==null?void 0:t.name)&&Zn(e)};function vn(e){return e.nodeType===qt}function er(e){return e.nodeType===Vt}function Ce(e){return e.nodeType===Gt}var tr=(e,t,n,r,i,l)=>{if(vn(e))return Yt(e.data,t);if(er(e))return Gn(e.data,t);let o=Ce(e)?"DocumentFragment":e.tagName.toLowerCase();return++r>t.maxDepth?Ve(o,t):qe(o,We(Ce(e)?[]:Array.from(e.attributes,u=>u.name).sort(),Ce(e)?{}:[...e.attributes].reduce((u,s)=>(u[s.name]=s.value,u),{}),t,n+t.indent,r,i,l),Ye(Array.prototype.slice.call(e.childNodes||e.children),t,n+t.indent,r,i,l),t,n)},nr={serialize:tr,test:Qn},rr="@@__IMMUTABLE_ITERABLE__@@",ir="@@__IMMUTABLE_LIST__@@",or="@@__IMMUTABLE_KEYED__@@",lr="@@__IMMUTABLE_MAP__@@",ve="@@__IMMUTABLE_ORDERED__@@",ur="@@__IMMUTABLE_RECORD__@@",sr="@@__IMMUTABLE_SEQ__@@",cr="@@__IMMUTABLE_SET__@@",ar="@@__IMMUTABLE_STACK__@@",ae=e=>`Immutable.${e}`,$e=e=>`[${e}]`,fe=" ",et="…";function gr(e,t,n,r,i,l,o){return++r>t.maxDepth?$e(ae(o)):`${ae(o)+fe}{${Oe(e.entries(),t,n,r,i,l)}}`}function hr(e){let t=0;return{next(){if(t<e._keys.length){let n=e._keys[t++];return{done:!1,value:[n,e.get(n)]}}return{done:!0,value:void 0}}}}function fr(e,t,n,r,i,l){let o=ae(e._name||"Record");return++r>t.maxDepth?$e(o):`${o+fe}{${Oe(hr(e),t,n,r,i,l)}}`}function mr(e,t,n,r,i,l){let o=ae("Seq");return++r>t.maxDepth?$e(o):e[or]?`${o+fe}{${e._iter||e._object?Oe(e.entries(),t,n,r,i,l):et}}`:`${o+fe}[${e._iter||e._array||e._collection||e._iterable?Ue(e.values(),t,n,r,i,l):et}]`}function Te(e,t,n,r,i,l,o){return++r>t.maxDepth?$e(ae(o)):`${ae(o)+fe}[${Ue(e.values(),t,n,r,i,l)}]`}var pr=(e,t,n,r,i,l)=>e[lr]?gr(e,t,n,r,i,l,e[ve]?"OrderedMap":"Map"):e[ir]?Te(e,t,n,r,i,l,"List"):e[cr]?Te(e,t,n,r,i,l,e[ve]?"OrderedSet":"Set"):e[ar]?Te(e,t,n,r,i,l,"Stack"):e[sr]?mr(e,t,n,r,i,l):fr(e,t,n,r,i,l),yr=e=>e&&(e[rr]===!0||e[ur]===!0),br={serialize:pr,test:yr},tt={exports:{}},C={},nt;function _r(){if(nt)return C;nt=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.server_context"),s=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function p(g){if(typeof g=="object"&&g!==null){var _=g.$$typeof;switch(_){case e:switch(g=g.type,g){case n:case i:case r:case a:case c:return g;default:switch(g=g&&g.$$typeof,g){case u:case o:case s:case b:case f:case l:return g;default:return _}}case t:return _}}}return C.ContextConsumer=o,C.ContextProvider=l,C.Element=e,C.ForwardRef=s,C.Fragment=n,C.Lazy=b,C.Memo=f,C.Portal=t,C.Profiler=i,C.StrictMode=r,C.Suspense=a,C.SuspenseList=c,C.isAsyncMode=function(){return!1},C.isConcurrentMode=function(){return!1},C.isContextConsumer=function(g){return p(g)===o},C.isContextProvider=function(g){return p(g)===l},C.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},C.isForwardRef=function(g){return p(g)===s},C.isFragment=function(g){return p(g)===n},C.isLazy=function(g){return p(g)===b},C.isMemo=function(g){return p(g)===f},C.isPortal=function(g){return p(g)===t},C.isProfiler=function(g){return p(g)===i},C.isStrictMode=function(g){return p(g)===r},C.isSuspense=function(g){return p(g)===a},C.isSuspenseList=function(g){return p(g)===c},C.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===n||g===i||g===r||g===a||g===c||g===h||typeof g=="object"&&g!==null&&(g.$$typeof===b||g.$$typeof===f||g.$$typeof===l||g.$$typeof===o||g.$$typeof===s||g.$$typeof===m||g.getModuleId!==void 0)},C.typeOf=p,C}var rt;function Sr(){return rt||(rt=1,tt.exports=_r()),tt.exports}var re=Sr();function Ht(e,t=[]){if(Array.isArray(e))for(let n of e)Ht(n,t);else e!=null&&e!==!1&&e!==""&&t.push(e);return t}function it(e){let t=e.type;if(typeof t=="string")return t;if(typeof t=="function")return t.displayName||t.name||"Unknown";if(re.isFragment(e))return"React.Fragment";if(re.isSuspense(e))return"React.Suspense";if(typeof t=="object"&&t!==null){if(re.isContextProvider(e))return"Context.Provider";if(re.isContextConsumer(e))return"Context.Consumer";if(re.isForwardRef(e)){if(t.displayName)return t.displayName;let n=t.render.displayName||t.render.name||"";return n===""?"ForwardRef":`ForwardRef(${n})`}if(re.isMemo(e)){let n=t.displayName||t.type.displayName||t.type.name||"";return n===""?"Memo":`Memo(${n})`}}return"UNDEFINED"}function Or(e){let{props:t}=e;return Object.keys(t).filter(n=>n!=="children"&&t[n]!==void 0).sort()}var $r=(e,t,n,r,i,l)=>++r>t.maxDepth?Ve(it(e),t):qe(it(e),We(Or(e),e.props,t,n+t.indent,r,i,l),Ye(Ht(e.props.children),t,n+t.indent,r,i,l),t,n),Er=e=>e!=null&&re.isElement(e),dr={serialize:$r,test:Er},wr=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.test.json"):245830487;function Cr(e){let{props:t}=e;return t?Object.keys(t).filter(n=>t[n]!==void 0).sort():[]}var Tr=(e,t,n,r,i,l)=>++r>t.maxDepth?Ve(e.type,t):qe(e.type,e.props?We(Cr(e),e.props,t,n+t.indent,r,i,l):"",e.children?Ye(e.children,t,n+t.indent,r,i,l):"",t,n),Nr=e=>e&&e.$$typeof===wr,Ar={serialize:Tr,test:Nr},Jt=Object.prototype.toString,Mr=Date.prototype.toISOString,Ir=Error.prototype.toString,ot=RegExp.prototype.toString;function Ne(e){return typeof e.constructor=="function"&&e.constructor.name||"Object"}function Rr(e){return typeof window<"u"&&e===window}var Lr=/^Symbol\((.*)\)(.*)$/,Pr=/\n/g,Xt=class extends Error{constructor(e,t){super(e),this.stack=t,this.name=this.constructor.name}};function Dr(e){return e==="[object Array]"||e==="[object ArrayBuffer]"||e==="[object DataView]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object Int8Array]"||e==="[object Int16Array]"||e==="[object Int32Array]"||e==="[object Uint8Array]"||e==="[object Uint8ClampedArray]"||e==="[object Uint16Array]"||e==="[object Uint32Array]"}function jr(e){return Object.is(e,-0)?"-0":String(e)}function Fr(e){return`${e}n`}function lt(e,t){return t?`[Function ${e.name||"anonymous"}]`:"[Function]"}function ut(e){return String(e).replace(Lr,"Symbol($1)")}function st(e){return`[${Ir.call(e)}]`}function Zt(e,t,n,r){if(e===!0||e===!1)return`${e}`;if(e===void 0)return"undefined";if(e===null)return"null";let i=typeof e;if(i==="number")return jr(e);if(i==="bigint")return Fr(e);if(i==="string")return r?`"${e.replaceAll(/"|\\/g,"\\$&")}"`:`"${e}"`;if(i==="function")return lt(e,t);if(i==="symbol")return ut(e);let l=Jt.call(e);return l==="[object WeakMap]"?"WeakMap {}":l==="[object WeakSet]"?"WeakSet {}":l==="[object Function]"||l==="[object GeneratorFunction]"?lt(e,t):l==="[object Symbol]"?ut(e):l==="[object Date]"?Number.isNaN(+e)?"Date { NaN }":Mr.call(e):l==="[object Error]"?st(e):l==="[object RegExp]"?n?ot.call(e).replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&"):ot.call(e):e instanceof Error?st(e):null}function Qt(e,t,n,r,i,l){if(i.includes(e))return"[Circular]";i=[...i],i.push(e);let o=++r>t.maxDepth,u=t.min;if(t.callToJSON&&!o&&e.toJSON&&typeof e.toJSON=="function"&&!l)return ee(e.toJSON(),t,n,r,i,!0);let s=Jt.call(e);return s==="[object Arguments]"?o?"[Arguments]":`${u?"":"Arguments "}[${Se(e,t,n,r,i,ee)}]`:Dr(s)?o?`[${e.constructor.name}]`:`${u||!t.printBasicPrototype&&e.constructor.name==="Array"?"":`${e.constructor.name} `}[${Se(e,t,n,r,i,ee)}]`:s==="[object Map]"?o?"[Map]":`Map {${Oe(e.entries(),t,n,r,i,ee," => ")}}`:s==="[object Set]"?o?"[Set]":`Set {${Ue(e.values(),t,n,r,i,ee)}}`:o||Rr(e)?`[${Ne(e)}]`:`${u||!t.printBasicPrototype&&Ne(e)==="Object"?"":`${Ne(e)} `}{${Ke(e,t,n,r,i,ee)}}`}function Br(e){return e.serialize!=null}function vt(e,t,n,r,i,l){let o;try{o=Br(e)?e.serialize(t,n,r,i,l,ee):e.print(t,u=>ee(u,n,r,i,l),u=>{let s=r+n.indent;return s+u.replaceAll(Pr,`
${s}`)},{edgeSpacing:n.spacingOuter,min:n.min,spacing:n.spacingInner},n.colors)}catch(u){throw new Xt(u.message,u.stack)}if(typeof o!="string")throw new TypeError(`pretty-format: Plugin must return type "string" but instead returned "${typeof o}".`);return o}function en(e,t){for(let n of e)try{if(n.test(t))return n}catch(r){throw new Xt(r.message,r.stack)}return null}function ee(e,t,n,r,i,l){let o=en(t.plugins,e);if(o!==null)return vt(o,e,t,n,r,i);let u=Zt(e,t.printFunctionName,t.escapeRegex,t.escapeString);return u!==null?u:Qt(e,t,n,r,i,l)}var Ge={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},tn=Object.keys(Ge),K={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:Number.POSITIVE_INFINITY,maxWidth:Number.POSITIVE_INFINITY,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:Ge};function xr(e){for(let t of Object.keys(e))if(!Object.prototype.hasOwnProperty.call(K,t))throw new Error(`pretty-format: Unknown option "${t}".`);if(e.min&&e.indent!==void 0&&e.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.')}function kr(){return tn.reduce((e,t)=>{let n=Ge[t],r=n&&Q[n];if(r&&typeof r.close=="string"&&typeof r.open=="string")e[t]=r;else throw new Error(`pretty-format: Option "theme" has a key "${t}" whose value "${n}" is undefined in ansi-styles.`);return e},Object.create(null))}function zr(){return tn.reduce((e,t)=>(e[t]={close:"",open:""},e),Object.create(null))}function nn(e){return e?.printFunctionName??K.printFunctionName}function rn(e){return e?.escapeRegex??K.escapeRegex}function on(e){return e?.escapeString??K.escapeString}function ct(e){return{callToJSON:e?.callToJSON??K.callToJSON,colors:e?.highlight?kr():zr(),compareKeys:typeof e?.compareKeys=="function"||e?.compareKeys===null?e.compareKeys:K.compareKeys,escapeRegex:rn(e),escapeString:on(e),indent:e?.min?"":Ur(e?.indent??K.indent),maxDepth:e?.maxDepth??K.maxDepth,maxWidth:e?.maxWidth??K.maxWidth,min:e?.min??K.min,plugins:e?.plugins??K.plugins,printBasicPrototype:e?.printBasicPrototype??!0,printFunctionName:nn(e),spacingInner:e?.min?" ":`
`,spacingOuter:e?.min?"":`
`}}function Ur(e){return Array.from({length:e+1}).join(" ")}function q(e,t){if(t&&(xr(t),t.plugins)){let r=en(t.plugins,e);if(r!==null)return vt(r,e,ct(t),"",0,[])}let n=Zt(e,nn(t),rn(t),on(t));return n!==null?n:Qt(e,ct(t),"",0,[])}var ln={AsymmetricMatcher:kn,DOMCollection:Vn,DOMElement:nr,Immutable:br,ReactElement:dr,ReactTestComponent:Ar},at={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Kr={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},ge="…";function Wr(e,t){let n=at[Kr[t]]||at[t]||"";return n?`\x1B[${n[0]}m${String(e)}\x1B[${n[1]}m`:String(e)}function Yr({showHidden:e=!1,depth:t=2,colors:n=!1,customInspect:r=!0,showProxy:i=!1,maxArrayLength:l=1/0,breakLength:o=1/0,seen:u=[],truncate:s=1/0,stylize:a=String}={},c){let f={showHidden:!!e,depth:Number(t),colors:!!n,customInspect:!!r,showProxy:!!i,maxArrayLength:Number(l),breakLength:Number(o),truncate:Number(s),seen:u,inspect:c,stylize:a};return f.colors&&(f.stylize=Wr),f}function qr(e){return e>="\uD800"&&e<="\uDBFF"}function te(e,t,n=ge){e=String(e);let r=n.length,i=e.length;if(r>t&&i>r)return n;if(i>t&&i>r){let l=t-r;return l>0&&qr(e[l-1])&&(l=l-1),`${e.slice(0,l)}${n}`}return e}function W(e,t,n,r=", "){n=n||t.inspect;let i=e.length;if(i===0)return"";let l=t.truncate,o="",u="",s="";for(let a=0;a<i;a+=1){let c=a+1===e.length,f=a+2===e.length;s=`${ge}(${e.length-a})`;let b=e[a];t.truncate=l-o.length-(c?0:r.length);let h=u||n(b,t)+(c?"":r),m=o.length+h.length,p=m+s.length;if(c&&m>l&&o.length+s.length<=l||!c&&!f&&p>l||(u=c?"":n(e[a+1],t)+(f?"":r),!c&&f&&p>l&&m+u.length>l))break;if(o+=h,!c&&!f&&m+u.length>=l){s=`${ge}(${e.length-a-1})`;break}s=""}return`${o}${s}`}function Vr(e){return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?e:JSON.stringify(e).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}function me([e,t],n){return n.truncate-=2,typeof e=="string"?e=Vr(e):typeof e!="number"&&(e=`[${n.inspect(e,n)}]`),n.truncate-=e.length,t=n.inspect(t,n),`${e}: ${t}`}function Gr(e,t){let n=Object.keys(e).slice(e.length);if(!e.length&&!n.length)return"[]";t.truncate-=4;let r=W(e,t);t.truncate-=r.length;let i="";return n.length&&(i=W(n.map(l=>[l,e[l]]),t,me)),`[ ${r}${i?`, ${i}`:""} ]`}var Hr=e=>typeof Buffer=="function"&&e instanceof Buffer?"Buffer":e[Symbol.toStringTag]?e[Symbol.toStringTag]:e.constructor.name;function X(e,t){let n=Hr(e);t.truncate-=n.length+4;let r=Object.keys(e).slice(e.length);if(!e.length&&!r.length)return`${n}[]`;let i="";for(let o=0;o<e.length;o++){let u=`${t.stylize(te(e[o],t.truncate),"number")}${o===e.length-1?"":", "}`;if(t.truncate-=u.length,e[o]!==e.length&&t.truncate<=3){i+=`${ge}(${e.length-e[o]+1})`;break}i+=u}let l="";return r.length&&(l=W(r.map(o=>[o,e[o]]),t,me)),`${n}[ ${i}${l?`, ${l}`:""} ]`}function Jr(e,t){let n=e.toJSON();if(n===null)return"Invalid Date";let r=n.split("T"),i=r[0];return t.stylize(`${i}T${te(r[1],t.truncate-i.length-1)}`,"date")}function gt(e,t){let n=e[Symbol.toStringTag]||"Function",r=e.name;return r?t.stylize(`[${n} ${te(r,t.truncate-11)}]`,"special"):t.stylize(`[${n}]`,"special")}function Xr([e,t],n){return n.truncate-=4,e=n.inspect(e,n),n.truncate-=e.length,t=n.inspect(t,n),`${e} => ${t}`}function Zr(e){let t=[];return e.forEach((n,r)=>{t.push([r,n])}),t}function Qr(e,t){return e.size-1<=0?"Map{}":(t.truncate-=7,`Map{ ${W(Zr(e),t,Xr)} }`)}var vr=Number.isNaN||(e=>e!==e);function ht(e,t){return vr(e)?t.stylize("NaN","number"):e===1/0?t.stylize("Infinity","number"):e===-1/0?t.stylize("-Infinity","number"):e===0?t.stylize(1/e===1/0?"+0":"-0","number"):t.stylize(te(String(e),t.truncate),"number")}function ft(e,t){let n=te(e.toString(),t.truncate-1);return n!==ge&&(n+="n"),t.stylize(n,"bigint")}function ei(e,t){let n=e.toString().split("/")[2],r=t.truncate-(2+n.length),i=e.source;return t.stylize(`/${te(i,r)}/${n}`,"regexp")}function ti(e){let t=[];return e.forEach(n=>{t.push(n)}),t}function ni(e,t){return e.size===0?"Set{}":(t.truncate-=7,`Set{ ${W(ti(e),t)} }`)}var mt=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),ri={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},ii=16;function oi(e){return ri[e]||`\\u${`0000${e.charCodeAt(0).toString(ii)}`.slice(-4)}`}function pt(e,t){return mt.test(e)&&(e=e.replace(mt,oi)),t.stylize(`'${te(e,t.truncate-2)}'`,"string")}function yt(e){return"description"in Symbol.prototype?e.description?`Symbol(${e.description})`:"Symbol()":e.toString()}var un=()=>"Promise{…}";try{let{getPromiseDetails:e,kPending:t,kRejected:n}=process.binding("util");Array.isArray(e(Promise.resolve()))&&(un=(r,i)=>{let[l,o]=e(r);return l===t?"Promise{<pending>}":`Promise${l===n?"!":""}{${i.inspect(o,i)}}`})}catch{}var li=un;function _e(e,t){let n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[];if(n.length===0&&r.length===0)return"{}";if(t.truncate-=4,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);let i=W(n.map(u=>[u,e[u]]),t,me),l=W(r.map(u=>[u,e[u]]),t,me);t.seen.pop();let o="";return i&&l&&(o=", "),`{ ${i}${o}${l} }`}var Ae=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function ui(e,t){let n="";return Ae&&Ae in e&&(n=e[Ae]),n=n||e.constructor.name,(!n||n==="_class")&&(n="<Anonymous Class>"),t.truncate-=n.length,`${n}${_e(e,t)}`}function si(e,t){return e.length===0?"Arguments[]":(t.truncate-=13,`Arguments[ ${W(e,t)} ]`)}var ci=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function ai(e,t){let n=Object.getOwnPropertyNames(e).filter(o=>ci.indexOf(o)===-1),r=e.name;t.truncate-=r.length;let i="";if(typeof e.message=="string"?i=te(e.message,t.truncate):n.unshift("message"),i=i?`: ${i}`:"",t.truncate-=i.length+5,t.seen=t.seen||[],t.seen.includes(e))return"[Circular]";t.seen.push(e);let l=W(n.map(o=>[o,e[o]]),t,me);return`${r}${i}${l?` { ${l} }`:""}`}function gi([e,t],n){return n.truncate-=3,t?`${n.stylize(String(e),"yellow")}=${n.stylize(`"${t}"`,"string")}`:`${n.stylize(String(e),"yellow")}`}function Pe(e,t){return W(e,t,sn,`
`)}function sn(e,t){let n=e.getAttributeNames(),r=e.tagName.toLowerCase(),i=t.stylize(`<${r}`,"special"),l=t.stylize(">","special"),o=t.stylize(`</${r}>`,"special");t.truncate-=r.length*2+5;let u="";n.length>0&&(u+=" ",u+=W(n.map(c=>[c,e.getAttribute(c)]),t,gi," ")),t.truncate-=u.length;let s=t.truncate,a=Pe(e.children,t);return a&&a.length>s&&(a=`${ge}(${e.children.length})`),`${i}${u}${l}${a}${o}`}var hi=typeof Symbol=="function"&&typeof Symbol.for=="function",Me=hi?Symbol.for("chai/inspect"):"@@chai/inspect",ue=!1;try{let e=In("util");ue=e.inspect?e.inspect.custom:!1}catch{ue=!1}var bt=new WeakMap,_t={},St={undefined:(e,t)=>t.stylize("undefined","undefined"),null:(e,t)=>t.stylize("null","null"),boolean:(e,t)=>t.stylize(String(e),"boolean"),Boolean:(e,t)=>t.stylize(String(e),"boolean"),number:ht,Number:ht,bigint:ft,BigInt:ft,string:pt,String:pt,function:gt,Function:gt,symbol:yt,Symbol:yt,Array:Gr,Date:Jr,Map:Qr,Set:ni,RegExp:ei,Promise:li,WeakSet:(e,t)=>t.stylize("WeakSet{…}","special"),WeakMap:(e,t)=>t.stylize("WeakMap{…}","special"),Arguments:si,Int8Array:X,Uint8Array:X,Uint8ClampedArray:X,Int16Array:X,Uint16Array:X,Int32Array:X,Uint32Array:X,Float32Array:X,Float64Array:X,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:ai,HTMLCollection:Pe,NodeList:Pe},fi=(e,t,n)=>Me in e&&typeof e[Me]=="function"?e[Me](t):ue&&ue in e&&typeof e[ue]=="function"?e[ue](t.depth,t):"inspect"in e&&typeof e.inspect=="function"?e.inspect(t.depth,t):"constructor"in e&&bt.has(e.constructor)?bt.get(e.constructor)(e,t):_t[n]?_t[n](e,t):"",mi=Object.prototype.toString;function De(e,t={}){let n=Yr(t,De),{customInspect:r}=n,i=e===null?"null":typeof e;if(i==="object"&&(i=mi.call(e).slice(8,-1)),i in St)return St[i](e,n);if(r&&e){let o=fi(e,n,i);if(o)return typeof o=="string"?o:De(o,n)}let l=e?Object.getPrototypeOf(e):!1;return l===Object.prototype||l===null?_e(e,n):e&&typeof HTMLElement=="function"&&e instanceof HTMLElement?sn(e,n):"constructor"in e?e.constructor!==Object?ui(e,n):_e(e,n):e===Object(e)?_e(e,n):n.stylize(String(e),i)}var{AsymmetricMatcher:pi,DOMCollection:yi,DOMElement:bi,Immutable:_i,ReactElement:Si,ReactTestComponent:Oi}=ln,Ot=[Oi,Si,bi,yi,_i,pi];function pe(e,t=10,{maxLength:n,...r}={}){let i=n??1e4,l;try{l=q(e,{maxDepth:t,escapeString:!1,plugins:Ot,...r})}catch{l=q(e,{callToJSON:!1,maxDepth:t,escapeString:!1,plugins:Ot,...r})}return l.length>=i&&t>1?pe(e,Math.floor(t/2)):l}var $i=/%[sdjifoOc%]/g;function Ei(...e){if(typeof e[0]!="string"){let l=[];for(let o=0;o<e.length;o++)l.push(he(e[o],{depth:0,colors:!1}));return l.join(" ")}let t=e.length,n=1,r=e[0],i=String(r).replace($i,l=>{if(l==="%%")return"%";if(n>=t)return l;switch(l){case"%s":{let o=e[n++];return typeof o=="bigint"?`${o.toString()}n`:typeof o=="number"&&o===0&&1/o<0?"-0":typeof o=="object"&&o!==null?he(o,{depth:0,colors:!1}):String(o)}case"%d":{let o=e[n++];return typeof o=="bigint"?`${o.toString()}n`:Number(o).toString()}case"%i":{let o=e[n++];return typeof o=="bigint"?`${o.toString()}n`:Number.parseInt(String(o)).toString()}case"%f":return Number.parseFloat(String(e[n++])).toString();case"%o":return he(e[n++],{showHidden:!0,showProxy:!0});case"%O":return he(e[n++]);case"%c":return n++,"";case"%j":try{return JSON.stringify(e[n++])}catch(o){let u=o.message;if(u.includes("circular structure")||u.includes("cyclic structures")||u.includes("cyclic object"))return"[Circular]";throw o}default:return l}});for(let l=e[n];n<t;l=e[++n])l===null||typeof l!="object"?i+=` ${l}`:i+=` ${he(l)}`;return i}function he(e,t={}){return t.truncate===0&&(t.truncate=Number.POSITIVE_INFINITY),De(e,t)}function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wi(e){return e===Object.prototype||e===Function.prototype||e===RegExp.prototype}function je(e){return Object.prototype.toString.apply(e).slice(8,-1)}function Ci(e,t){let n=typeof t=="function"?t:r=>t.add(r);Object.getOwnPropertyNames(e).forEach(n),Object.getOwnPropertySymbols(e).forEach(n)}function cn(e){let t=new Set;return wi(e)?[]:(Ci(e,t),Array.from(t))}var an={forceWritable:!1};function $t(e,t=an){return Fe(e,new WeakMap,t)}function Fe(e,t,n=an){let r,i;if(t.has(e))return t.get(e);if(Array.isArray(e)){for(i=Array.from({length:r=e.length}),t.set(e,i);r--;)i[r]=Fe(e[r],t,n);return i}if(Object.prototype.toString.call(e)==="[object Object]"){i=Object.create(Object.getPrototypeOf(e)),t.set(e,i);let l=cn(e);for(let o of l){let u=Object.getOwnPropertyDescriptor(e,o);if(!u)continue;let s=Fe(e[o],t,n);n.forceWritable?Object.defineProperty(i,o,{enumerable:u.enumerable,configurable:!0,writable:!0,value:s}):"get"in u?Object.defineProperty(i,o,{...u,get(){return s}}):Object.defineProperty(i,o,{...u,value:s})}return i}return e}function Et(e){if(e===void 0)return"undefined";if(e===null)return"null";if(Array.isArray(e))return"array";if(typeof e=="boolean")return"boolean";if(typeof e=="function")return"function";if(typeof e=="number")return"number";if(typeof e=="string")return"string";if(typeof e=="bigint")return"bigint";if(typeof e=="object"){if(e!=null){if(e.constructor===RegExp)return"regexp";if(e.constructor===Map)return"map";if(e.constructor===Set)return"set";if(e.constructor===Date)return"date"}return"object"}else if(typeof e=="symbol")return"symbol";throw new Error(`value of unknown type: ${e}`)}var R=-1,I=1,A=0,N=class{0;1;constructor(e,t){this[0]=e,this[1]=t}},Ti=function(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;let n=0,r=Math.min(e.length,t.length),i=r,l=0;for(;n<i;)e.substring(l,i)===t.substring(l,i)?(n=i,l=n):r=i,i=Math.floor((r-n)/2+n);return i},gn=function(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;let n=0,r=Math.min(e.length,t.length),i=r,l=0;for(;n<i;)e.substring(e.length-i,e.length-l)===t.substring(t.length-i,t.length-l)?(n=i,l=n):r=i,i=Math.floor((r-n)/2+n);return i},dt=function(e,t){let n=e.length,r=t.length;if(n===0||r===0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));let i=Math.min(n,r);if(e===t)return i;let l=0,o=1;for(;;){let u=e.substring(i-o),s=t.indexOf(u);if(s===-1)return l;o+=s,(s===0||e.substring(i-o)===t.substring(0,o))&&(l=o,o++)}},Ni=function(e){let t=!1,n=[],r=0,i=null,l=0,o=0,u=0,s=0,a=0;for(;l<e.length;)e[l][0]===A?(n[r++]=l,o=s,u=a,s=0,a=0,i=e[l][1]):(e[l][0]===I?s+=e[l][1].length:a+=e[l][1].length,i&&i.length<=Math.max(o,u)&&i.length<=Math.max(s,a)&&(e.splice(n[r-1],0,new N(R,i)),e[n[r-1]+1][0]=I,r--,r--,l=r>0?n[r-1]:-1,o=0,u=0,s=0,a=0,i=null,t=!0)),l++;for(t&&hn(e),Ii(e),l=1;l<e.length;){if(e[l-1][0]===R&&e[l][0]===I){let c=e[l-1][1],f=e[l][1],b=dt(c,f),h=dt(f,c);b>=h?(b>=c.length/2||b>=f.length/2)&&(e.splice(l,0,new N(A,f.substring(0,b))),e[l-1][1]=c.substring(0,c.length-b),e[l+1][1]=f.substring(b),l++):(h>=c.length/2||h>=f.length/2)&&(e.splice(l,0,new N(A,c.substring(0,h))),e[l-1][0]=I,e[l-1][1]=f.substring(0,f.length-h),e[l+1][0]=R,e[l+1][1]=c.substring(h),l++),l++}l++}},wt=/[^a-z0-9]/i,Ct=/\s/,Tt=/[\r\n]/,Ai=/\n\r?\n$/,Mi=/^\r?\n\r?\n/;function Ii(e){let t=1;for(;t<e.length-1;){if(e[t-1][0]===A&&e[t+1][0]===A){let n=e[t-1][1],r=e[t][1],i=e[t+1][1],l=gn(n,r);if(l){let c=r.substring(r.length-l);n=n.substring(0,n.length-l),r=c+r.substring(0,r.length-l),i=c+i}let o=n,u=r,s=i,a=ye(n,r)+ye(r,i);for(;r.charAt(0)===i.charAt(0);){n+=r.charAt(0),r=r.substring(1)+i.charAt(0),i=i.substring(1);let c=ye(n,r)+ye(r,i);c>=a&&(a=c,o=n,u=r,s=i)}e[t-1][1]!==o&&(o?e[t-1][1]=o:(e.splice(t-1,1),t--),e[t][1]=u,s?e[t+1][1]=s:(e.splice(t+1,1),t--))}t++}}function hn(e){e.push(new N(A,""));let t=0,n=0,r=0,i="",l="",o;for(;t<e.length;)switch(e[t][0]){case I:r++,l+=e[t][1],t++;break;case R:n++,i+=e[t][1],t++;break;case A:n+r>1?(n!==0&&r!==0&&(o=Ti(l,i),o!==0&&(t-n-r>0&&e[t-n-r-1][0]===A?e[t-n-r-1][1]+=l.substring(0,o):(e.splice(0,0,new N(A,l.substring(0,o))),t++),l=l.substring(o),i=i.substring(o)),o=gn(l,i),o!==0&&(e[t][1]=l.substring(l.length-o)+e[t][1],l=l.substring(0,l.length-o),i=i.substring(0,i.length-o))),t-=n+r,e.splice(t,n+r),i.length&&(e.splice(t,0,new N(R,i)),t++),l.length&&(e.splice(t,0,new N(I,l)),t++),t++):t!==0&&e[t-1][0]===A?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,i="",l="";break}e[e.length-1][1]===""&&e.pop();let u=!1;for(t=1;t<e.length-1;)e[t-1][0]===A&&e[t+1][0]===A&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)===e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),u=!0):e[t][1].substring(0,e[t+1][1].length)===e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),u=!0)),t++;u&&hn(e)}function ye(e,t){if(!e||!t)return 6;let n=e.charAt(e.length-1),r=t.charAt(0),i=n.match(wt),l=r.match(wt),o=i&&n.match(Ct),u=l&&r.match(Ct),s=o&&n.match(Tt),a=u&&r.match(Tt),c=s&&e.match(Ai),f=a&&t.match(Mi);return c||f?5:s||a?4:i&&!o&&u?3:o||u?2:i||l?1:0}var fn="Compared values have no visual difference.",Ri="Compared values serialize to the same structure.\nPrinting internal object structure without calling `toJSON` instead.",be={},Nt;function Li(){if(Nt)return be;Nt=1,Object.defineProperty(be,"__esModule",{value:!0}),be.default=b;let e="diff-sequences",t=0,n=(h,m,p,g,_)=>{let S=0;for(;h<m&&p<g&&_(h,p);)h+=1,p+=1,S+=1;return S},r=(h,m,p,g,_)=>{let S=0;for(;h<=m&&p<=g&&_(m,g);)m-=1,g-=1,S+=1;return S},i=(h,m,p,g,_,S,d)=>{let y=0,$=-h,E=S[y],O=E;S[y]+=n(E+1,m,g+E-$+1,p,_);let T=h<d?h:d;for(y+=1,$+=2;y<=T;y+=1,$+=2){if(y!==h&&O<S[y])E=S[y];else if(E=O+1,m<=E)return y-1;O=S[y],S[y]=E+n(E+1,m,g+E-$+1,p,_)}return d},l=(h,m,p,g,_,S,d)=>{let y=0,$=h,E=S[y],O=E;S[y]-=r(m,E-1,p,g+E-$-1,_);let T=h<d?h:d;for(y+=1,$-=2;y<=T;y+=1,$-=2){if(y!==h&&S[y]<O)E=S[y];else if(E=O-1,E<m)return y-1;O=S[y],S[y]=E-r(m,E-1,p,g+E-$-1,_)}return d},o=(h,m,p,g,_,S,d,y,$,E,O)=>{let T=g-m,V=p-m,D=_-g-V,L=-D-(h-1),F=-D+(h-1),B=t,G=h<y?h:y;for(let w=0,M=-h;w<=G;w+=1,M+=2){let H=w===0||w!==h&&B<d[w],j=H?d[w]:B,k=H?j:j+1,J=T+k-M,z=n(k+1,p,J+1,_,S),U=k+z;if(B=d[w],d[w]=U,L<=M&&M<=F){let ne=(h-1-(M+D))/2;if(ne<=E&&$[ne]-1<=U){let v=T+j-(H?M+1:M-1),x=r(m,j,g,v,S),Y=j-x,oe=v-x,le=Y+1,de=oe+1;O.nChangePreceding=h-1,h-1===le+de-m-g?(O.aEndPreceding=m,O.bEndPreceding=g):(O.aEndPreceding=le,O.bEndPreceding=de),O.nCommonPreceding=x,x!==0&&(O.aCommonPreceding=le,O.bCommonPreceding=de),O.nCommonFollowing=z,z!==0&&(O.aCommonFollowing=k+1,O.bCommonFollowing=J+1);let Xe=U+1,Ze=J+z+1;return O.nChangeFollowing=h-1,h-1===p+_-Xe-Ze?(O.aStartFollowing=p,O.bStartFollowing=_):(O.aStartFollowing=Xe,O.bStartFollowing=Ze),!0}}}return!1},u=(h,m,p,g,_,S,d,y,$,E,O)=>{let T=_-p,V=p-m,D=_-g-V,L=D-h,F=D+h,B=t,G=h<E?h:E;for(let w=0,M=h;w<=G;w+=1,M-=2){let H=w===0||w!==h&&$[w]<B,j=H?$[w]:B,k=H?j:j-1,J=T+k-M,z=r(m,k-1,g,J-1,S),U=k-z;if(B=$[w],$[w]=U,L<=M&&M<=F){let ne=(h+(M-D))/2;if(ne<=y&&U-1<=d[ne]){let v=J-z;if(O.nChangePreceding=h,h===U+v-m-g?(O.aEndPreceding=m,O.bEndPreceding=g):(O.aEndPreceding=U,O.bEndPreceding=v),O.nCommonPreceding=z,z!==0&&(O.aCommonPreceding=U,O.bCommonPreceding=v),O.nChangeFollowing=h-1,h===1)O.nCommonFollowing=0,O.aStartFollowing=p,O.bStartFollowing=_;else{let x=T+j-(H?M-1:M+1),Y=n(j,p,x,_,S);O.nCommonFollowing=Y,Y!==0&&(O.aCommonFollowing=j,O.bCommonFollowing=x);let oe=j+Y,le=x+Y;h-1===p+_-oe-le?(O.aStartFollowing=p,O.bStartFollowing=_):(O.aStartFollowing=oe,O.bStartFollowing=le)}return!0}}}return!1},s=(h,m,p,g,_,S,d,y,$)=>{let E=g-m,O=_-p,T=p-m,V=_-g,D=V-T,L=T,F=T;if(d[0]=m-1,y[0]=p,D%2===0){let B=(h||D)/2,G=(T+V)/2;for(let w=1;w<=G;w+=1)if(L=i(w,p,_,E,S,d,L),w<B)F=l(w,m,g,O,S,y,F);else if(u(w,m,p,g,_,S,d,L,y,F,$))return}else{let B=((h||D)+1)/2,G=(T+V+1)/2,w=1;for(L=i(w,p,_,E,S,d,L),w+=1;w<=G;w+=1)if(F=l(w-1,m,g,O,S,y,F),w<B)L=i(w,p,_,E,S,d,L);else if(o(w,m,p,g,_,S,d,L,y,F,$))return}throw new Error(`${e}: no overlap aStart=${m} aEnd=${p} bStart=${g} bEnd=${_}`)},a=(h,m,p,g,_,S,d,y,$,E)=>{if(_-g<p-m){if(S=!S,S&&d.length===1){let{foundSubsequence:ne,isCommon:v}=d[0];d[1]={foundSubsequence:(x,Y,oe)=>{ne(x,oe,Y)},isCommon:(x,Y)=>v(Y,x)}}let z=m,U=p;m=g,p=_,g=z,_=U}let{foundSubsequence:O,isCommon:T}=d[S?1:0];s(h,m,p,g,_,T,y,$,E);let{nChangePreceding:V,aEndPreceding:D,bEndPreceding:L,nCommonPreceding:F,aCommonPreceding:B,bCommonPreceding:G,nCommonFollowing:w,aCommonFollowing:M,bCommonFollowing:H,nChangeFollowing:j,aStartFollowing:k,bStartFollowing:J}=E;m<D&&g<L&&a(V,m,D,g,L,S,d,y,$,E),F!==0&&O(F,B,G),w!==0&&O(w,M,H),k<p&&J<_&&a(j,k,p,J,_,S,d,y,$,E)},c=(h,m)=>{if(typeof m!="number")throw new TypeError(`${e}: ${h} typeof ${typeof m} is not a number`);if(!Number.isSafeInteger(m))throw new RangeError(`${e}: ${h} value ${m} is not a safe integer`);if(m<0)throw new RangeError(`${e}: ${h} value ${m} is a negative integer`)},f=(h,m)=>{let p=typeof m;if(p!=="function")throw new TypeError(`${e}: ${h} typeof ${p} is not a function`)};function b(h,m,p,g){c("aLength",h),c("bLength",m),f("isCommon",p),f("foundSubsequence",g);let _=n(0,h,0,m,p);if(_!==0&&g(_,0,0),h!==_||m!==_){let S=_,d=_,y=r(S,h-1,d,m-1,p),$=h-y,E=m-y,O=_+y;h!==O&&m!==O&&a(0,S,$,d,E,!1,[{foundSubsequence:g,isCommon:p}],[t],[t],{aCommonFollowing:t,aCommonPreceding:t,aEndPreceding:t,aStartFollowing:t,bCommonFollowing:t,bCommonPreceding:t,bEndPreceding:t,bStartFollowing:t,nChangeFollowing:t,nChangePreceding:t,nCommonFollowing:t,nCommonPreceding:t}),y!==0&&g(y,$,E)}}return be}var Pi=Li(),mn=di(Pi);function Di(e,t){return e.replace(/\s+$/,n=>t(n))}function He(e,t,n,r,i,l){return e.length!==0?n(`${r} ${Di(e,i)}`):r!==" "?n(r):t&&l.length!==0?n(`${r} ${l}`):""}function pn(e,t,{aColor:n,aIndicator:r,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return He(e,t,n,r,i,l)}function yn(e,t,{bColor:n,bIndicator:r,changeLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return He(e,t,n,r,i,l)}function bn(e,t,{commonColor:n,commonIndicator:r,commonLineTrailingSpaceColor:i,emptyFirstOrLastLinePlaceholder:l}){return He(e,t,n,r,i,l)}function At(e,t,n,r,{patchColor:i}){return i(`@@ -${e+1},${t-e} +${n+1},${r-n} @@`)}function ji(e,t){let n=e.length,r=t.contextLines,i=r+r,l=n,o=!1,u=0,s=0;for(;s!==n;){let y=s;for(;s!==n&&e[s][0]===A;)s+=1;if(y!==s)if(y===0)s>r&&(l-=s-r,o=!0);else if(s===n){let $=s-y;$>r&&(l-=$-r,o=!0)}else{let $=s-y;$>i&&(l-=$-i,u+=1)}for(;s!==n&&e[s][0]!==A;)s+=1}let a=u!==0||o;u!==0?l+=u+1:o&&(l+=1);let c=l-1,f=[],b=0;a&&f.push("");let h=0,m=0,p=0,g=0,_=y=>{let $=f.length;f.push(bn(y,$===0||$===c,t)),p+=1,g+=1},S=y=>{let $=f.length;f.push(pn(y,$===0||$===c,t)),p+=1},d=y=>{let $=f.length;f.push(yn(y,$===0||$===c,t)),g+=1};for(s=0;s!==n;){let y=s;for(;s!==n&&e[s][0]===A;)s+=1;if(y!==s)if(y===0){s>r&&(y=s-r,h=y,m=y,p=h,g=m);for(let $=y;$!==s;$+=1)_(e[$][1])}else if(s===n){let $=s-y>r?y+r:s;for(let E=y;E!==$;E+=1)_(e[E][1])}else{let $=s-y;if($>i){let E=y+r;for(let T=y;T!==E;T+=1)_(e[T][1]);f[b]=At(h,p,m,g,t),b=f.length,f.push("");let O=$-i;h=p+O,m=g+O,p=h,g=m;for(let T=s-r;T!==s;T+=1)_(e[T][1])}else for(let E=y;E!==s;E+=1)_(e[E][1])}for(;s!==n&&e[s][0]===R;)S(e[s][1]),s+=1;for(;s!==n&&e[s][0]===I;)d(e[s][1]),s+=1}return a&&(f[b]=At(h,p,m,g,t)),f.join(`
`)}function Fi(e,t){return e.map((n,r,i)=>{let l=n[1],o=r===0||r===i.length-1;switch(n[0]){case R:return pn(l,o,t);case I:return yn(l,o,t);default:return bn(l,o,t)}}).join(`
`)}var Ie=e=>e,_n=5,Bi=0;function xi(){return{aAnnotation:"Expected",aColor:Q.green,aIndicator:"-",bAnnotation:"Received",bColor:Q.red,bIndicator:"+",changeColor:Q.inverse,changeLineTrailingSpaceColor:Ie,commonColor:Q.dim,commonIndicator:" ",commonLineTrailingSpaceColor:Ie,compareKeys:void 0,contextLines:_n,emptyFirstOrLastLinePlaceholder:"",expand:!0,includeChangeCounts:!1,omitAnnotationLines:!1,patchColor:Q.yellow,truncateThreshold:Bi,truncateAnnotation:"... Diff result is truncated",truncateAnnotationColor:Ie}}function ki(e){return e&&typeof e=="function"?e:void 0}function zi(e){return typeof e=="number"&&Number.isSafeInteger(e)&&e>=0?e:_n}function ie(e={}){return{...xi(),...e,compareKeys:ki(e.compareKeys),contextLines:zi(e.contextLines)}}function se(e){return e.length===1&&e[0].length===0}function Ui(e){let t=0,n=0;return e.forEach(r=>{switch(r[0]){case R:t+=1;break;case I:n+=1;break}}),{a:t,b:n}}function Ki({aAnnotation:e,aColor:t,aIndicator:n,bAnnotation:r,bColor:i,bIndicator:l,includeChangeCounts:o,omitAnnotationLines:u},s){if(u)return"";let a="",c="";if(o){let h=String(s.a),m=String(s.b),p=r.length-e.length,g=" ".repeat(Math.max(0,p)),_=" ".repeat(Math.max(0,-p)),S=m.length-h.length,d=" ".repeat(Math.max(0,S)),y=" ".repeat(Math.max(0,-S));a=`${g}  ${n} ${d}${h}`,c=`${_}  ${l} ${y}${m}`}let f=`${n} ${e}${a}`,b=`${l} ${r}${c}`;return`${t(f)}
${i(b)}

`}function Je(e,t,n){return Ki(n,Ui(e))+(n.expand?Fi(e,n):ji(e,n))+(t?n.truncateAnnotationColor(`
${n.truncateAnnotation}`):"")}function Ee(e,t,n){let r=ie(n),[i,l]=Sn(se(e)?[]:e,se(t)?[]:t,r);return Je(i,l,r)}function Wi(e,t,n,r,i){if(se(e)&&se(n)&&(e=[],n=[]),se(t)&&se(r)&&(t=[],r=[]),e.length!==n.length||t.length!==r.length)return Ee(e,t,i);let[l,o]=Sn(n,r,i),u=0,s=0;return l.forEach(a=>{switch(a[0]){case R:a[1]=e[u],u+=1;break;case I:a[1]=t[s],s+=1;break;default:a[1]=t[s],u+=1,s+=1}}),Je(l,o,ie(i))}function Sn(e,t,n){let r=n?.truncateThreshold??!1,i=Math.max(Math.floor(n?.truncateThreshold??0),0),l=r?Math.min(e.length,i):e.length,o=r?Math.min(t.length,i):t.length,u=l!==e.length||o!==t.length,s=(b,h)=>e[b]===t[h],a=[],c=0,f=0;for(mn(l,o,s,(b,h,m)=>{for(;c!==h;c+=1)a.push(new N(R,e[c]));for(;f!==m;f+=1)a.push(new N(I,t[f]));for(;b!==0;b-=1,c+=1,f+=1)a.push(new N(A,t[f]))});c!==l;c+=1)a.push(new N(R,e[c]));for(;f!==o;f+=1)a.push(new N(I,t[f]));return[a,u]}function Mt(e){return e.includes(`\r
`)?`\r
`:`
`}function Yi(e,t,n){let r=n?.truncateThreshold??!1,i=Math.max(Math.floor(n?.truncateThreshold??0),0),l=e.length,o=t.length;if(r){let b=e.includes(`
`),h=t.includes(`
`),m=Mt(e),p=Mt(t),g=b?`${e.split(m,i).join(m)}
`:e,_=h?`${t.split(p,i).join(p)}
`:t;l=g.length,o=_.length}let u=l!==e.length||o!==t.length,s=(b,h)=>e[b]===t[h],a=0,c=0,f=[];return mn(l,o,s,(b,h,m)=>{a!==h&&f.push(new N(R,e.slice(a,h))),c!==m&&f.push(new N(I,t.slice(c,m))),a=h+b,c=m+b,f.push(new N(A,t.slice(m,c)))}),a!==l&&f.push(new N(R,e.slice(a))),c!==o&&f.push(new N(I,t.slice(c))),[f,u]}function qi(e,t,n){return t.reduce((r,i)=>r+(i[0]===A?i[1]:i[0]===e&&i[1].length!==0?n(i[1]):""),"")}var It=class{op;line;lines;changeColor;constructor(e,t){this.op=e,this.line=[],this.lines=[],this.changeColor=t}pushSubstring(e){this.pushDiff(new N(this.op,e))}pushLine(){this.lines.push(this.line.length!==1?new N(this.op,qi(this.op,this.line,this.changeColor)):this.line[0][0]===this.op?this.line[0]:new N(this.op,this.line[0][1])),this.line.length=0}isLineEmpty(){return this.line.length===0}pushDiff(e){this.line.push(e)}align(e){let t=e[1];if(t.includes(`
`)){let n=t.split(`
`),r=n.length-1;n.forEach((i,l)=>{l<r?(this.pushSubstring(i),this.pushLine()):i.length!==0&&this.pushSubstring(i)})}else this.pushDiff(e)}moveLinesTo(e){this.isLineEmpty()||this.pushLine(),e.push(...this.lines),this.lines.length=0}},Vi=class{deleteBuffer;insertBuffer;lines;constructor(e,t){this.deleteBuffer=e,this.insertBuffer=t,this.lines=[]}pushDiffCommonLine(e){this.lines.push(e)}pushDiffChangeLines(e){let t=e[1].length===0;(!t||this.deleteBuffer.isLineEmpty())&&this.deleteBuffer.pushDiff(e),(!t||this.insertBuffer.isLineEmpty())&&this.insertBuffer.pushDiff(e)}flushChangeLines(){this.deleteBuffer.moveLinesTo(this.lines),this.insertBuffer.moveLinesTo(this.lines)}align(e){let t=e[0],n=e[1];if(n.includes(`
`)){let r=n.split(`
`),i=r.length-1;r.forEach((l,o)=>{if(o===0){let u=new N(t,l);this.deleteBuffer.isLineEmpty()&&this.insertBuffer.isLineEmpty()?(this.flushChangeLines(),this.pushDiffCommonLine(u)):(this.pushDiffChangeLines(u),this.flushChangeLines())}else o<i?this.pushDiffCommonLine(new N(t,l)):l.length!==0&&this.pushDiffChangeLines(new N(t,l))})}else this.pushDiffChangeLines(e)}getLines(){return this.flushChangeLines(),this.lines}};function Gi(e,t){let n=new It(R,t),r=new It(I,t),i=new Vi(n,r);return e.forEach(l=>{switch(l[0]){case R:n.align(l);break;case I:r.align(l);break;default:i.align(l)}}),i.getLines()}function Hi(e,t){if(t){let n=e.length-1;return e.some((r,i)=>r[0]===A&&(i!==n||r[1]!==`
`))}return e.some(n=>n[0]===A)}function Ji(e,t,n){if(e!==t&&e.length!==0&&t.length!==0){let r=e.includes(`
`)||t.includes(`
`),[i,l]=On(r?`${e}
`:e,r?`${t}
`:t,!0,n);if(Hi(i,r)){let o=ie(n),u=Gi(i,o.changeColor);return Je(u,l,o)}}return Ee(e.split(`
`),t.split(`
`),n)}function On(e,t,n,r){let[i,l]=Yi(e,t,r);return Ni(i),[i,l]}function Be(e,t){let{commonColor:n}=ie(t);return n(e)}var{AsymmetricMatcher:Xi,DOMCollection:Zi,DOMElement:Qi,Immutable:vi,ReactElement:eo,ReactTestComponent:to}=ln,$n=[to,eo,Qi,Zi,vi,Xi],xe={plugins:$n},En={callToJSON:!1,maxDepth:10,plugins:$n};function no(e,t,n){if(Object.is(e,t))return"";let r=Et(e),i=r,l=!1;if(r==="object"&&typeof e.asymmetricMatch=="function"){if(e.$$typeof!==Symbol.for("jest.asymmetricMatcher")||typeof e.getExpectedType!="function")return;i=e.getExpectedType(),l=i==="string"}if(i!==Et(t)){let{aAnnotation:o,aColor:u,aIndicator:s,bAnnotation:a,bColor:c,bIndicator:f}=ie(n),b=ke(En,n),h=q(e,b),m=q(t,b),p=`${u(`${s} ${o}:`)} 
${h}`,g=`${c(`${f} ${a}:`)} 
${m}`;return`${p}

${g}`}if(!l)switch(r){case"string":return Ee(e.split(`
`),t.split(`
`),n);case"boolean":case"number":return ro(e,t,n);case"map":return Re(Rt(e),Rt(t),n);case"set":return Re(Lt(e),Lt(t),n);default:return Re(e,t,n)}}function ro(e,t,n){let r=q(e,xe),i=q(t,xe);return r===i?"":Ee(r.split(`
`),i.split(`
`),n)}function Rt(e){return new Map(Array.from(e.entries()).sort())}function Lt(e){return new Set(Array.from(e.values()).sort())}function Re(e,t,n){let r,i=!1;try{let o=ke(xe,n);r=Pt(e,t,o,n)}catch{i=!0}let l=Be(fn,n);if(r===void 0||r===l){let o=ke(En,n);r=Pt(e,t,o,n),r!==l&&!i&&(r=`${Be(Ri,n)}

${r}`)}return r}function ke(e,t){let{compareKeys:n}=ie(t);return{...e,compareKeys:n}}function Pt(e,t,n,r){let i={...n,indent:0},l=q(e,i),o=q(t,i);if(l===o)return Be(fn,r);{let u=q(e,n),s=q(t,n);return Wi(u.split(`
`),s.split(`
`),l.split(`
`),o.split(`
`),r)}}var Dt=2e4;function jt(e){return je(e)==="Object"&&typeof e.asymmetricMatch=="function"}function Ft(e,t){let n=je(e),r=je(t);return n===r&&(n==="Object"||n==="Array")}function io(e,t,n){let{aAnnotation:r,bAnnotation:i}=ie(n);if(typeof e=="string"&&typeof t=="string"&&e.length>0&&t.length>0&&e.length<=Dt&&t.length<=Dt&&e!==t){if(e.includes(`
`)||t.includes(`
`))return Ji(t,e,n);let[a]=On(t,e),c=a.some(m=>m[0]===A),f=oo(r,i),b=f(r)+so(Bt(a,R,c)),h=f(i)+uo(Bt(a,I,c));return`${b}
${h}`}let l=$t(e,{forceWritable:!0}),o=$t(t,{forceWritable:!0}),{replacedExpected:u,replacedActual:s}=dn(l,o);return no(u,s,n)}function dn(e,t,n=new WeakSet,r=new WeakSet){return Ft(e,t)?n.has(e)||r.has(t)?{replacedActual:e,replacedExpected:t}:(n.add(e),r.add(t),cn(t).forEach(i=>{let l=t[i],o=e[i];if(jt(l))l.asymmetricMatch(o)&&(e[i]=l);else if(jt(o))o.asymmetricMatch(l)&&(t[i]=o);else if(Ft(o,l)){let u=dn(o,l,n,r);e[i]=u.replacedActual,t[i]=u.replacedExpected}}),{replacedActual:e,replacedExpected:t}):{replacedActual:e,replacedExpected:t}}function oo(...e){let t=e.reduce((n,r)=>r.length>n?r.length:n,0);return n=>`${n}: ${" ".repeat(t-n.length)}`}var lo="·";function wn(e){return e.replace(/\s+$/gm,t=>lo.repeat(t.length))}function uo(e){return Q.red(wn(pe(e)))}function so(e){return Q.green(wn(pe(e)))}function Bt(e,t,n){return e.reduce((r,i)=>r+(i[0]===A?i[1]:i[0]===t?n?Q.inverse(i[1]):i[1]:""),"")}var co="@@__IMMUTABLE_RECORD__@@",ao="@@__IMMUTABLE_ITERABLE__@@";function go(e){return e&&(e[ao]||e[co])}var ho=Object.getPrototypeOf({});function xt(e){return e instanceof Error?`<unserializable>: ${e.message}`:typeof e=="string"?`<unserializable>: ${e}`:"<unserializable>"}function ce(e,t=new WeakMap){if(!e||typeof e=="string")return e;if(typeof e=="function")return`Function<${e.name||"anonymous"}>`;if(typeof e=="symbol")return e.toString();if(typeof e!="object")return e;if(go(e))return ce(e.toJSON(),t);if(e instanceof Promise||e.constructor&&e.constructor.prototype==="AsyncFunction")return"Promise";if(typeof Element<"u"&&e instanceof Element)return e.tagName;if(typeof e.asymmetricMatch=="function")return`${e.toString()} ${Ei(e.sample)}`;if(typeof e.toJSON=="function")return ce(e.toJSON(),t);if(t.has(e))return t.get(e);if(Array.isArray(e)){let n=new Array(e.length);return t.set(e,n),e.forEach((r,i)=>{try{n[i]=ce(r,t)}catch(l){n[i]=xt(l)}}),n}else{let n=Object.create(null);t.set(e,n);let r=e;for(;r&&r!==ho;)Object.getOwnPropertyNames(r).forEach(i=>{if(!(i in n))try{n[i]=ce(e[i],t)}catch(l){delete n[i],n[i]=xt(l)}}),r=Object.getPrototypeOf(r);return n}}function fo(e){return e.replace(/__(vite_ssr_import|vi_import)_\d+__\./g,"")}function Cn(e,t,n=new WeakSet){if(!e||typeof e!="object")return{message:String(e)};let r=e;r.stack&&(r.stackStr=String(r.stack)),r.name&&(r.nameStr=String(r.name)),(r.showDiff||r.showDiff===void 0&&r.expected!==void 0&&r.actual!==void 0)&&(r.diff=io(r.actual,r.expected,{...t,...r.diffOptions})),typeof r.expected!="string"&&(r.expected=pe(r.expected,10)),typeof r.actual!="string"&&(r.actual=pe(r.actual,10));try{typeof r.message=="string"&&(r.message=fo(r.message))}catch{}try{!n.has(r)&&typeof r.cause=="object"&&(n.add(r),r.cause=Cn(r.cause,t,n))}catch{}try{return ce(r)}catch(i){return ce(new Error(`Failed to fully serialize error: ${i?.message}
Inner error message: ${r?.message}`))}}var mo=(e=>(e.DONE="done",e.ERROR="error",e.ACTIVE="active",e.WAITING="waiting",e))(mo||{}),Z={CALL:"storybook/instrumenter/call",SYNC:"storybook/instrumenter/sync",START:"storybook/instrumenter/start",BACK:"storybook/instrumenter/back",GOTO:"storybook/instrumenter/goto",NEXT:"storybook/instrumenter/next",END:"storybook/instrumenter/end"},kt={start:!1,back:!1,goto:!1,next:!1,end:!1},po=new Error("This function ran after the play function completed. Did you forget to `await` it?"),zt=e=>Object.prototype.toString.call(e)==="[object Object]",yo=e=>Object.prototype.toString.call(e)==="[object Module]",bo=e=>{if(!zt(e)&&!yo(e))return!1;if(e.constructor===void 0)return!0;let t=e.constructor.prototype;return!!zt(t)},_o=e=>{try{return new e.constructor}catch{return{}}},Le=()=>({renderPhase:void 0,isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,ancestors:[],playUntil:void 0,resolvers:{},syncTimeout:void 0}),Ut=(e,t=!1)=>{let n=(t?e.shadowCalls:e.calls).filter(i=>i.retain);if(!n.length)return;let r=new Map(Array.from(e.callRefsByResult.entries()).filter(([,i])=>i.retain));return{cursor:n.length,calls:n,callRefsByResult:r}},So=class{constructor(){this.initialized=!1,this.channel=Mn.getChannel(),this.state=P.window?.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{};let e=({storyId:o,isPlaying:u=!0,isDebugging:s=!1})=>{let a=this.getState(o);this.setState(o,{...Le(),...Ut(a,s),shadowCalls:s?a.shadowCalls:[],chainedCallIds:s?a.chainedCallIds:new Set,playUntil:s?a.playUntil:void 0,isPlaying:u,isDebugging:s}),this.sync(o)};this.channel.on(Qe,e),this.channel.on(Nn,({storyId:o,newPhase:u})=>{let{isDebugging:s}=this.getState(o);this.setState(o,{renderPhase:u}),u==="preparing"&&s&&e({storyId:o}),u==="playing"&&e({storyId:o,isDebugging:s}),u==="played"&&this.setState(o,{isLocked:!1,isPlaying:!1,isDebugging:!1}),u==="errored"&&this.setState(o,{isLocked:!1,isPlaying:!1})}),this.channel.on(An,()=>{this.initialized?this.cleanup():this.initialized=!0});let t=({storyId:o,playUntil:u})=>{this.getState(o).isDebugging||this.setState(o,({calls:a})=>({calls:[],shadowCalls:a.map(c=>({...c,status:"waiting"})),isDebugging:!0}));let s=this.getLog(o);this.setState(o,({shadowCalls:a})=>{if(u||!s.length)return{playUntil:u};let c=a.findIndex(f=>f.id===s[0].callId);return{playUntil:a.slice(0,c).filter(f=>f.interceptable&&!f.ancestors?.length).slice(-1)[0]?.id}}),this.channel.emit(Qe,{storyId:o,isDebugging:!0})},n=({storyId:o})=>{let u=this.getLog(o).filter(a=>!a.ancestors?.length),s=u.reduceRight((a,c,f)=>a>=0||c.status==="waiting"?a:f,-1);t({storyId:o,playUntil:u[s-1]?.callId})},r=({storyId:o,callId:u})=>{let{calls:s,shadowCalls:a,resolvers:c}=this.getState(o),f=s.find(({id:h})=>h===u),b=a.find(({id:h})=>h===u);if(!f&&b&&Object.values(c).length>0){let h=this.getLog(o).find(m=>m.status==="waiting")?.callId;b.id!==h&&this.setState(o,{playUntil:b.id}),Object.values(c).forEach(m=>m())}else t({storyId:o,playUntil:u})},i=({storyId:o})=>{let{resolvers:u}=this.getState(o);if(Object.values(u).length>0)Object.values(u).forEach(s=>s());else{let s=this.getLog(o).find(a=>a.status==="waiting")?.callId;s?t({storyId:o,playUntil:s}):l({storyId:o})}},l=({storyId:o})=>{this.setState(o,{playUntil:void 0,isDebugging:!1}),Object.values(this.getState(o).resolvers).forEach(u=>u())};this.channel.on(Z.START,t),this.channel.on(Z.BACK,n),this.channel.on(Z.GOTO,r),this.channel.on(Z.NEXT,i),this.channel.on(Z.END,l)}getState(e){return this.state[e]||Le()}setState(e,t){let n=this.getState(e),r=typeof t=="function"?t(n):t;this.state={...this.state,[e]:{...n,...r}},P.window?.parent&&(P.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state)}cleanup(){this.state=Object.entries(this.state).reduce((t,[n,r])=>{let i=Ut(r);return i&&(t[n]=Object.assign(Le(),i)),t},{});let e={controlStates:kt,logItems:[]};this.channel.emit(Z.SYNC,e),P.window?.parent&&(P.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state)}getLog(e){let{calls:t,shadowCalls:n}=this.getState(e),r=[...n];t.forEach((l,o)=>{r[o]=l});let i=new Set;return r.reduceRight((l,o)=>(o.args.forEach(u=>{u?.__callId__&&i.add(u.__callId__)}),o.path.forEach(u=>{u.__callId__&&i.add(u.__callId__)}),(o.interceptable||o.exception)&&!i.has(o.id)&&(l.unshift({callId:o.id,status:o.status,ancestors:o.ancestors}),i.add(o.id)),l),[])}instrument(e,t,n=0){if(!bo(e))return e;let{mutate:r=!1,path:i=[]}=t,l=t.getKeys?t.getKeys(e,n):Object.keys(e);return n+=1,l.reduce((o,u)=>{let s=Oo(e,u);if(typeof s?.get=="function"){let c=()=>s?.get?.bind(e)?.();return Object.defineProperty(o,u,{get:()=>this.instrument(c(),{...t,path:i.concat(u)},n)}),o}let a=e[u];return typeof a!="function"?(o[u]=this.instrument(a,{...t,path:i.concat(u)},n),o):"__originalFn__"in a&&typeof a.__originalFn__=="function"?(o[u]=a,o):(o[u]=(...c)=>this.track(u,a,e,c,t),o[u].__originalFn__=a,Object.defineProperty(o[u],"name",{value:u,writable:!1}),Object.keys(a).length>0&&Object.assign(o[u],this.instrument({...a},{...t,path:i.concat(u)},n)),o)},r?e:_o(e))}track(e,t,n,r,i){let l=r?.[0]?.__storyId__||P.__STORYBOOK_PREVIEW__?.selectionStore?.selection?.storyId,{cursor:o,ancestors:u}=this.getState(l);this.setState(l,{cursor:o+1});let s=`${u.slice(-1)[0]||l} [${o}] ${e}`,{path:a=[],intercept:c=!1,retain:f=!1}=i,b=typeof c=="function"?c(e,a):c,h={id:s,cursor:o,storyId:l,ancestors:u,path:a,method:e,args:r,interceptable:b,retain:f},m=(b&&!u.length?this.intercept:this.invoke).call(this,t,n,h,i);return this.instrument(m,{...i,mutate:!0,path:[{__callId__:h.id}]})}intercept(e,t,n,r){let{chainedCallIds:i,isDebugging:l,playUntil:o}=this.getState(n.storyId),u=i.has(n.id);return!l||u||o?(o===n.id&&this.setState(n.storyId,{playUntil:void 0}),this.invoke(e,t,n,r)):new Promise(s=>{this.setState(n.storyId,({resolvers:a})=>({isLocked:!1,resolvers:{...a,[n.id]:s}}))}).then(()=>(this.setState(n.storyId,s=>{let{[n.id]:a,...c}=s.resolvers;return{isLocked:!0,resolvers:c}}),this.invoke(e,t,n,r)))}invoke(e,t,n,r){let{callRefsByResult:i,renderPhase:l}=this.getState(n.storyId),o=25,u=(c,f,b)=>{if(b.includes(c))return"[Circular]";if(b=[...b,c],f>o)return"...";if(i.has(c))return i.get(c);if(c instanceof Array)return c.map(h=>u(h,++f,b));if(c instanceof Date)return{__date__:{value:c.toISOString()}};if(c instanceof Error){let{name:h,message:m,stack:p}=c;return{__error__:{name:h,message:m,stack:p}}}if(c instanceof RegExp){let{flags:h,source:m}=c;return{__regexp__:{flags:h,source:m}}}if(c instanceof P.window?.HTMLElement){let{prefix:h,localName:m,id:p,classList:g,innerText:_}=c,S=Array.from(g);return{__element__:{prefix:h,localName:m,id:p,classNames:S,innerText:_}}}return typeof c=="function"?{__function__:{name:"getMockName"in c?c.getMockName():c.name}}:typeof c=="symbol"?{__symbol__:{description:c.description}}:typeof c=="object"&&c?.constructor?.name&&c?.constructor?.name!=="Object"?{__class__:{name:c.constructor.name}}:Object.prototype.toString.call(c)==="[object Object]"?Object.fromEntries(Object.entries(c).map(([h,m])=>[h,u(m,++f,b)])):c},s={...n,args:n.args.map(c=>u(c,0,[]))};n.path.forEach(c=>{c?.__callId__&&this.setState(n.storyId,({chainedCallIds:f})=>({chainedCallIds:new Set(Array.from(f).concat(c.__callId__))}))});let a=c=>{if(c instanceof Error){let{name:f,message:b,stack:h,callId:m=n.id}=c,{showDiff:p=void 0,diff:g=void 0,actual:_=void 0,expected:S=void 0}=c.name==="AssertionError"?Cn(c):c,d={name:f,message:b,stack:h,callId:m,showDiff:p,diff:g,actual:_,expected:S};if(this.update({...s,status:"error",exception:d}),this.setState(n.storyId,y=>({callRefsByResult:new Map([...Array.from(y.callRefsByResult.entries()),[c,{__callId__:n.id,retain:n.retain}]])})),n.ancestors?.length)throw Object.prototype.hasOwnProperty.call(c,"callId")||Object.defineProperty(c,"callId",{value:n.id}),c}throw c};try{if(l==="played"&&!n.retain)throw po;let c=(r.getArgs?r.getArgs(n,this.getState(n.storyId)):n.args).map(b=>typeof b!="function"||Object.keys(b).length?b:(...h)=>{let{cursor:m,ancestors:p}=this.getState(n.storyId);this.setState(n.storyId,{cursor:0,ancestors:[...p,n.id]});let g=()=>this.setState(n.storyId,{cursor:m,ancestors:p}),_=!1;try{let S=b(...h);return S instanceof Promise?(_=!0,S.finally(g)):S}finally{_||g()}}),f=e.apply(t,c);return f&&["object","function","symbol"].includes(typeof f)&&this.setState(n.storyId,b=>({callRefsByResult:new Map([...Array.from(b.callRefsByResult.entries()),[f,{__callId__:n.id,retain:n.retain}]])})),this.update({...s,status:f instanceof Promise?"active":"done"}),f instanceof Promise?f.then(b=>(this.update({...s,status:"done"}),b),a):f}catch(c){return a(c)}}update(e){this.channel.emit(Z.CALL,e),this.setState(e.storyId,({calls:t})=>{let n=t.concat(e).reduce((r,i)=>Object.assign(r,{[i.id]:i}),{});return{calls:Object.values(n).sort((r,i)=>r.id.localeCompare(i.id,void 0,{numeric:!0}))}}),this.sync(e.storyId)}sync(e){let t=()=>{let{isLocked:n,isPlaying:r}=this.getState(e),i=this.getLog(e),l=i.filter(({ancestors:a})=>!a.length).find(a=>a.status==="waiting")?.callId,o=i.some(a=>a.status==="active");if(n||o||i.length===0){let a={controlStates:kt,logItems:i};this.channel.emit(Z.SYNC,a);return}let u=i.some(a=>a.status==="done"||a.status==="error"),s={controlStates:{start:u,back:u,goto:!0,next:r,end:r},logItems:i,pausedAt:l};this.channel.emit(Z.SYNC,s)};this.setState(e,({syncTimeout:n})=>(clearTimeout(n),{syncTimeout:setTimeout(t,0)}))}};function $o(e,t={}){try{let n=!1,r=!1;return P.window?.location?.search?.includes("instrument=true")?n=!0:P.window?.location?.search?.includes("instrument=false")&&(r=!0),P.window?.parent===P.window&&!n||r?e:(P.window&&!P.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__&&(P.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new So),(P.window?.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__).instrument(e,t))}catch(n){return Tn.warn(n),e}}function Oo(e,t){let n=e;for(;n!=null;){let r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}export{$o as i};
