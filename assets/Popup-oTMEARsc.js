import{r as o,R as ne,j as m}from"./iframe-C-Dpaqp0.js";import{r as xe}from"./index-Ch-JxXWG.js";const Re=[0,8],Me=({content:re,children:le,open:U,defaultOpen:ie=!1,trigger:k="click",placement:f="bottom",mode:n="non-modal",showBackdrop:se=!0,backdropClosable:X=!0,escapeClosable:C=!0,focusable:ue=!0,showDelay:_=0,hideDelay:j=100,_followCursor:Ve=!1,zIndex:N=1e3,className:pe,style:ce,getContainer:A,onOpenChange:q,beforeClose:S,afterOpen:Y,afterClose:Z,destroyOnClose:F=!1,offset:G=Re,autoAdjust:J=!0,arrow:E=!1,arrowContent:de,disabled:Q=!1,title:z,preventBodyScroll:v=!0,animationDuration:x=200})=>{const[fe,B]=o.useState(ie),[D,H]=o.useState({top:0,left:0}),[ee,$]=o.useState(f),h=o.useRef(null),te=o.useRef(null),R=o.useRef(0),M=o.useRef(0),w=o.useRef(0),b=U!==void 0,a=b?U:fe,r=o.useMemo(()=>Array.isArray(k)?k:[k],[k]),me=o.useMemo(()=>A?A():document.body,[A]),p=o.useCallback(()=>{R.current&&(clearTimeout(R.current),R.current=0),M.current&&(clearTimeout(M.current),M.current=0),w.current&&(clearTimeout(w.current),w.current=0)},[]),g=o.useCallback(e=>{if(!h.current)return console.log("‚ùå No trigger ref, returning default"),{position:{top:0,left:0},placement:e};const t=h.current.getBoundingClientRect(),i=te.current?.getBoundingClientRect()||{width:200,height:100},P={width:window.innerWidth,height:window.innerHeight},[L,W]=G,d=E?8:0;let s=0,u=0,T=e;switch(e.split("-")[0]){case"top":s=t.top-i.height-W-d;break;case"bottom":s=t.bottom+W+d;break;case"left":u=t.left-i.width-L-d;break;case"right":u=t.right+L+d;break}return e.includes("top")||e.includes("bottom")?e.includes("start")?u=t.left:e.includes("end")?u=t.right-i.width:u=t.left+(t.width-i.width)/2:(e.includes("left")||e.includes("right"))&&(e.includes("start")?s=t.top:e.includes("end")?s=t.bottom-i.height:s=t.top+(t.height-i.height)/2),J&&(s<8?e.includes("top")?(s=t.bottom+W+d,T=e.replace("top","bottom")):s=8:s+i.height>P.height-8&&(e.includes("bottom")?(s=t.top-i.height-W-d,T=e.replace("bottom","top")):s=P.height-i.height-8),u<8?e.includes("left")?(u=t.right+L+d,T=e.replace("left","right")):u=8:u+i.width>P.width-8&&(e.includes("right")?(u=t.left-i.width-L-d,T=e.replace("right","left")):u=P.width-i.width-8)),{position:{top:s,left:u},placement:T}},[G,E,J]),V=o.useCallback(()=>{if(!a||!h.current)return;const{position:e,placement:t}=g(f);H(e),$(t)},[a,f,g]),c=o.useCallback(async()=>{if(Q)return;p();const e=()=>{if(h.current){const{position:t,placement:y}=g(f);o.startTransition(()=>{H(t),$(y),b||B(!0)})}else o.startTransition(()=>{b||B(!0)});q?.(!0),w.current=setTimeout(()=>{Y?.()},x)};_>0?R.current=setTimeout(e,_):e()},[Q,b,q,_,x,Y,p,g,f]),l=o.useCallback(async(e="manual")=>{if(!a)return;p();const t=async()=>{S&&!await S(e)||(b||B(!1),q?.(!1),w.current=setTimeout(()=>{Z?.()},x))};j>0&&e==="trigger"?M.current=setTimeout(t,j):await t()},[a,S,b,q,j,x,Z,p]),oe=o.useCallback(()=>{a?l("trigger"):c()},[a,c,l]),he=o.useCallback(e=>{r.includes("click")&&(e.preventDefault(),e.stopPropagation(),oe())},[r,oe]),be=o.useCallback(()=>{r.includes("hover")&&c()},[r,c]),ge=o.useCallback(()=>{r.includes("hover")&&l("trigger")},[r,l]),ve=o.useCallback(()=>{r.includes("focus")&&c()},[r,c]),we=o.useCallback(()=>{r.includes("focus")&&l("trigger")},[r,l]),ye=o.useCallback(e=>{r.includes("contextMenu")&&(e.preventDefault(),c())},[r,c]),Te=o.useCallback(()=>{r.includes("hover")&&p()},[r,p]),ke=o.useCallback(()=>{r.includes("hover")&&l("trigger")},[r,l]),Ce=o.useCallback(e=>{n==="modal"&&X&&e.target===e.currentTarget&&l("backdrop")},[n,X,l]),I=o.useCallback(e=>{e.key==="Escape"&&C&&l("escape")},[C,l]),O=o.useCallback(()=>{a&&V()},[a,V]),K=o.useCallback(()=>{a&&n==="non-modal"&&V()},[a,n,V]);o.useEffect(()=>{if(a&&h.current){const{position:e,placement:t}=g(f);H(e),$(t)}},[a,f,g]),o.useEffect(()=>{if(a)return window.addEventListener("resize",O),window.addEventListener("scroll",K,!0),C&&document.addEventListener("keydown",I),n==="modal"&&v&&(document.body.style.overflow="hidden"),()=>{window.removeEventListener("resize",O),window.removeEventListener("scroll",K,!0),document.removeEventListener("keydown",I),n==="modal"&&v&&(document.body.style.overflow="")}},[a,O,K,I,C,n,v]),o.useEffect(()=>()=>{p(),n==="modal"&&v&&(document.body.style.overflow="")},[p,n,v]);const ae=ne.Children.only(le),qe=ne.cloneElement(ae,{ref:e=>{e&&(h.current=e);const t=ae.ref;typeof t=="function"?t(e):t&&typeof t=="object"&&(t.current=e)},onClick:he,onMouseEnter:be,onMouseLeave:ge,onFocus:ve,onBlur:we,onContextMenu:ye,"aria-expanded":a,"aria-haspopup":n==="modal"?"dialog":"true",...z&&{"aria-describedby":`popup-${Date.now()}`}}),Ee=()=>{if(!a&&F)return null;const e=["popup",`popup--${n}`,`popup--placement-${ee}`,a?"popup--open":"popup--closed",E&&"popup--with-arrow",pe].filter(Boolean).join(" "),t=m.jsxs("div",{ref:te,className:e,style:ce,onMouseEnter:Te,onMouseLeave:ke,role:n==="modal"?"dialog":void 0,"aria-modal":n==="modal","aria-hidden":!a,tabIndex:ue?0:-1,"data-popup-position":n==="modal"?"fixed":"absolute","data-popup-top":D.top,"data-popup-left":D.left,"data-popup-z-index":n==="modal"?N+1:N,"data-popup-transform":D.transform||"","data-popup-display":!a&&F?"none":"",...z&&{"aria-label":z},children:[E&&m.jsx("div",{className:`popup__arrow popup__arrow--${ee.split("-")[0]}`,children:de||m.jsx("div",{className:"popup__arrow-content"})}),m.jsx("div",{className:"popup__content",children:re})]});if(n==="modal"){const y=["popup-backdrop",se&&"popup-backdrop--visible",a?"popup-backdrop--open":"popup-backdrop--closed"].filter(Boolean).join(" ");return m.jsx("div",{className:y,"data-backdrop-z-index":N,onClick:Ce,children:t})}return t};return m.jsxs(m.Fragment,{children:[qe,(a||!F)&&xe.createPortal(Ee(),me)]})};Me.__docgenInfo={description:"",methods:[],displayName:"Popup",props:{content:{required:!0,tsType:{name:"ReactNode"},description:"Content to be displayed in the popup"},children:{required:!0,tsType:{name:"ReactNode"},description:"Trigger element that opens the popup"},open:{required:!1,tsType:{name:"boolean"},description:"Whether the popup is visible (for manual control)"},defaultOpen:{required:!1,tsType:{name:"boolean"},description:"Default open state for uncontrolled usage",defaultValue:{value:"false",computed:!1}},trigger:{required:!1,tsType:{name:"union",raw:"PopupTrigger | PopupTrigger[]",elements:[{name:"union",raw:"'click' | 'hover' | 'focus' | 'contextMenu' | 'manual'",elements:[{name:"literal",value:"'click'"},{name:"literal",value:"'hover'"},{name:"literal",value:"'focus'"},{name:"literal",value:"'contextMenu'"},{name:"literal",value:"'manual'"}]},{name:"Array",elements:[{name:"union",raw:"'click' | 'hover' | 'focus' | 'contextMenu' | 'manual'",elements:[{name:"literal",value:"'click'"},{name:"literal",value:"'hover'"},{name:"literal",value:"'focus'"},{name:"literal",value:"'contextMenu'"},{name:"literal",value:"'manual'"}]}],raw:"PopupTrigger[]"}]},description:"How the popup is triggered",defaultValue:{value:"'click'",computed:!1}},placement:{required:!1,tsType:{name:"union",raw:`| 'top' | 'top-start' | 'top-end'\r
| 'bottom' | 'bottom-start' | 'bottom-end'\r
| 'left' | 'left-start' | 'left-end'\r
| 'right' | 'right-start' | 'right-end'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-start'"},{name:"literal",value:"'top-end'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-start'"},{name:"literal",value:"'bottom-end'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-start'"},{name:"literal",value:"'left-end'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-start'"},{name:"literal",value:"'right-end'"}]},description:"Placement of the popup relative to trigger",defaultValue:{value:"'bottom'",computed:!1}},mode:{required:!1,tsType:{name:"union",raw:"'modal' | 'non-modal'",elements:[{name:"literal",value:"'modal'"},{name:"literal",value:"'non-modal'"}]},description:"Modal or non-modal behavior",defaultValue:{value:"'non-modal'",computed:!1}},showBackdrop:{required:!1,tsType:{name:"boolean"},description:"Whether to show backdrop/overlay (modal mode only)",defaultValue:{value:"true",computed:!1}},backdropClosable:{required:!1,tsType:{name:"boolean"},description:"Whether clicking backdrop closes popup (modal mode only)",defaultValue:{value:"true",computed:!1}},escapeClosable:{required:!1,tsType:{name:"boolean"},description:"Whether popup can be closed by pressing Escape",defaultValue:{value:"true",computed:!1}},focusable:{required:!1,tsType:{name:"boolean"},description:"Whether popup content can receive focus (non-modal mode)",defaultValue:{value:"true",computed:!1}},showDelay:{required:!1,tsType:{name:"number"},description:"Delay before showing popup (in ms)",defaultValue:{value:"0",computed:!1}},hideDelay:{required:!1,tsType:{name:"number"},description:"Delay before hiding popup (in ms)",defaultValue:{value:"100",computed:!1}},followCursor:{required:!1,tsType:{name:"boolean"},description:"Whether popup follows cursor on hover"},zIndex:{required:!1,tsType:{name:"number"},description:"Z-index for the popup",defaultValue:{value:"1000",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class name"},style:{required:!1,tsType:{name:"CSSProperties"},description:"Inline styles for popup container"},getContainer:{required:!1,tsType:{name:"signature",type:"function",raw:"() => HTMLElement",signature:{arguments:[],return:{name:"HTMLElement"}}},description:"Custom render container (for portal)"},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:"Callback when popup opens"},beforeClose:{required:!1,tsType:{name:"signature",type:"function",raw:"(reason: 'backdrop' | 'escape' | 'trigger' | 'manual') => boolean | Promise<boolean>",signature:{arguments:[{type:{name:"union",raw:"'backdrop' | 'escape' | 'trigger' | 'manual'",elements:[{name:"literal",value:"'backdrop'"},{name:"literal",value:"'escape'"},{name:"literal",value:"'trigger'"},{name:"literal",value:"'manual'"}]},name:"reason"}],return:{name:"union",raw:"boolean | Promise<boolean>",elements:[{name:"boolean"},{name:"Promise",elements:[{name:"boolean"}],raw:"Promise<boolean>"}]}}},description:"Callback when popup is about to close"},afterOpen:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback after popup opens"},afterClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback after popup closes"},destroyOnClose:{required:!1,tsType:{name:"boolean"},description:"Whether to destroy popup content when closed",defaultValue:{value:"false",computed:!1}},offset:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"Offset from the trigger element",defaultValue:{value:"[0, 8]",computed:!1}},autoAdjust:{required:!1,tsType:{name:"boolean"},description:"Whether popup adjusts position to fit viewport",defaultValue:{value:"true",computed:!1}},arrow:{required:!1,tsType:{name:"boolean"},description:"Arrow pointing to trigger element",defaultValue:{value:"false",computed:!1}},arrowContent:{required:!1,tsType:{name:"ReactNode"},description:"Custom arrow element"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether popup is disabled",defaultValue:{value:"false",computed:!1}},title:{required:!1,tsType:{name:"string"},description:"Popup title for accessibility"},preventBodyScroll:{required:!1,tsType:{name:"boolean"},description:"Whether to prevent body scroll when modal is open",defaultValue:{value:"true",computed:!1}},animationDuration:{required:!1,tsType:{name:"number"},description:"Animation duration in milliseconds",defaultValue:{value:"200",computed:!1}},_followCursor:{defaultValue:{value:"false",computed:!1},required:!1}}};export{Me as P};
